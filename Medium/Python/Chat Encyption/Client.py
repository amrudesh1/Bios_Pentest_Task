from multiprocessing.connection import Client
from AESEncrypt import Encryptor

if __name__ == '__main__':
    key = b'[EX\xc8\xd5\xbfI{\xa2$\x05(\xd5\x18\xbf\xc0\x85)\x10nc\x94\x02)j\xdf\xcb\xc4\x94\x9d(\x9e'
    enc = Encryptor(key)
    address = ('localhost', 6000)
    conn = Client(address, authkey=str.encode('secret password'))
    try:
        while True:
            message = str(input())
            conn.send(enc.encrypt_msg(message.encode()))
            # msg = str(conn.recv())
            # if msg:
            #     print(enc.decrypt_msg(msg.encode()))
    except KeyboardInterrupt:
        conn.close()
